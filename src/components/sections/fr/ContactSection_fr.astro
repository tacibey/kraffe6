---
// Gerekli bileÅŸenleri ve resimleri import et
import { Image } from "astro:assets";
import type { ImageMetadata } from 'astro'; // ImageMetadata tipini import et
import AuthBtn from "@components/ui/buttons/AuthBtn.astro";
import ContactIconBlock from "@components/ui/blocks/ContactIconBlock.astro";
import Icon from "@components/ui/icons/Icon.astro";
import ReviewComponent from "@components/ui/blocks/ReviewComponent.astro"; // Review bileÅŸeni
import scaLogo from "@images/sca2-new.webp";
import ceLogoNew from "@images/ce-mark-new.avif";

// Prop TanÄ±mÄ±: FransÄ±zca sayfadan gelen avatar verisini alacak
interface Props {
    amirAvatarData: ImageMetadata; // Bu prop dÄ±ÅŸarÄ±dan gelecek
}
const { amirAvatarData } = Astro.props;

// Review bÃ¶lÃ¼mÃ¼ iÃ§in grup avatar kaynaklarÄ± (Ä°ngilizce ile aynÄ±)
const groupAvatarSrcs: Array<string> = [
  "https://images.unsplash.com/photo-1568602471122-7832951cc4c5?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=facearea&facepad=2&w=300&h=300&q=80",
  "https://images.unsplash.com/photo-1531927557220-a9e23c1e4794?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=facearea&facepad=2&w=300&h=300&q=80",
  "https://images.unsplash.com/photo-1541101767792-f9b2b1c4f127?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&&auto=format&fit=facearea&facepad=3&w=300&h=300&q=80",
  "https://images.unsplash.com/photo-1492562080023-ab3db95bfbce?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=facearea&facepad=2&w=300&h=300&q=80",
];

// === FRANSIZCA SABÄ°T METÄ°NLER ===
const title_fr: string = "Votre nouvelle machine Ã  torrÃ©fier est Ã  portÃ©e de main";
const subTitle_fr: string = "Remplissez notre formulaire pour rÃ©vÃ©ler les secrets de vos grains de cafÃ© ðŸŒŸ";
const formTitle_fr: string = "DÃ©finissez votre demande et obtenez un devis";
const formSubTitle_fr: string = "Nous vous rÃ©pondrons dans un dÃ©lai de 1 Ã  2 jours ouvrables.";

const officeHeading_fr: string = "Notre Bureau";
const officeContent_fr: string = "KRAFFE ROASTERS";
// Adres aynÄ± kalabilir veya yerelleÅŸtirilebilir
const officeAddress_fr: string = "Adalet Mah. Manas Blv. No:39 Folkart Towers A Kule K:34 D:3408 BayraklÄ± / Ä°zmir / TÃœRKÄ°YE";


const emailHeading_fr: string = "Contactez-nous par e-mail";
const emailContent_fr: string = "Vous prÃ©fÃ©rez l'Ã©crit ? Envoyez-nous un e-mail Ã ";
const emailLinkTitle_fr: string = "info@krafferoasters.com"; // E-posta adresi genellikle deÄŸiÅŸmez
const emailLinkURL_fr: string = "mailto:info@krafferoasters.com";

const rating_fr: string = `<span class="font-bold">4.8</span> / 5`; // Rakamlar aynÄ± kalÄ±r
const starCount_fr: number = 4; // YÄ±ldÄ±z sayÄ±sÄ± aynÄ± kalÄ±r
const reviews_fr: string = `ApprouvÃ© par les <span class="font-bold">TorrÃ©facteurs</span> du Monde Entier`; // Ã‡evrildi
// === /FRANSIZCA SABÄ°T METÄ°NLER ===

// StaticForms bilgileri (API Key ve Recaptcha aynÄ± kalÄ±r)
const staticFormsApiKey = "sf_323gg5f098n8e9d9ch167dmh";
const recaptchaSiteKey = "6LeLrxwrAAAAABfZl7OIP3Yv0ibik2SANXaLixp6";
const redirectUrl_fr = "https://krafferoasters.com/fr/"; // YÃ¶nlendirme URL'si FransÄ±zca ana sayfaya

// ÃœrÃ¼n listesi (FransÄ±zca)
const productOptions_fr = [
  "Dimi - CapacitÃ© de lot de 0,5 kg",
  "Primi - CapacitÃ© de lot de 1 kg",
  "KRF-03", "KRF-06", "KRF-12", "KRF-15", "KRF-20",
  "KRF-30", "KRF-60", "KRF-120", "KRF-180", "KRF-240"
];

// Ãœlke/BÃ¶lge listesi (FransÄ±zca)
const countryOptions_fr = [
  "Europe", "Ã‰tats-Unis", "Royaume-Uni", "Russie", "AmÃ©rique du Sud", "Asie", "Autre"
];

// Input ve Select elemanlarÄ± iÃ§in ortak stil sÄ±nÄ±flarÄ± (aynÄ± kalÄ±r)
const inputBaseClass = "block w-full rounded-lg border border-neutral-200 bg-neutral-50 px-4 py-3 text-sm text-neutral-700 placeholder:text-neutral-500 focus:border-neutral-200 focus:outline-hidden focus:ring-3 focus:ring-neutral-400 disabled:pointer-events-none disabled:opacity-50 dark:border-neutral-600 dark:bg-neutral-700/30 dark:text-neutral-300 dark:placeholder:text-neutral-400 dark:focus:ring-1";
---

<section class="mx-auto max-w-[85rem] px-4 py-10 sm:px-6 lg:px-8 lg:py-14">
  <div class="mx-auto max-w-2xl lg:max-w-5xl">
    <div class="text-center">
      <h1 class="text-balance text-2xl font-bold tracking-tight text-neutral-800 dark:text-neutral-200 md:text-4xl md:leading-tight">
        {title_fr}
      </h1>
      <p class="mt-1 text-pretty text-lg text-neutral-600 dark:text-neutral-400">
        {subTitle_fr}
      </p>
      <div class="mt-8 flex items-center justify-center gap-x-8 sm:gap-x-12">
        <Image src={ceLogoNew} alt="Logo de certification CE Marking" class="h-24 w-auto object-contain sm:h-32" loading="lazy"/>
        <Image src={scaLogo} alt="Logo de membre de la Specialty Coffee Association" class="h-24 w-auto object-contain sm:h-32" loading="lazy"/>
      </div>
    </div>

    <div class="mt-12 grid items-start gap-6 lg:mt-16 lg:grid-cols-2 lg:gap-16">
      {/* Sol Taraf: Form */}
      <div class="flex flex-col rounded-xl border border-neutral-200 bg-neutral-100 p-4 shadow-sm dark:border-neutral-700 dark:bg-neutral-800 sm:p-6 lg:p-8">
        <h2 class="mb-8 text-xl font-semibold text-neutral-800 dark:text-neutral-200">
          {formTitle_fr}
        </h2>

        <form action="https://api.staticforms.xyz/submit" method="POST">
          <input type="hidden" name="apiKey" value={staticFormsApiKey} />
          <input type="hidden" name="replyTo" value="@" />
          <input type="text" name="honeypot" style="display: none;" tabindex="-1" autocomplete="off"/>
          <input type="hidden" name="redirectTo" value={redirectUrl_fr} />

          <div class="grid gap-4">
            <div>
              <label for="contact-name-fr" class="sr-only">Nom</label>
              <input type="text" id="contact-name-fr" name="name" class={inputBaseClass} placeholder="Nom" required />
            </div>
            <div>
              <label for="contact-company-fr" class="sr-only">SociÃ©tÃ©</label>
              <input type="text" id="contact-company-fr" name="$company" class={inputBaseClass} placeholder="SociÃ©tÃ©" />
            </div>
            <div>
              <label for="contact-email-fr" class="sr-only">E-mail</label>
              <input type="email" id="contact-email-fr" name="email" class={inputBaseClass} placeholder="E-mail" required autocomplete="email"/>
            </div>
            <div>
              <label for="contact-phone-fr" class="sr-only">NumÃ©ro de tÃ©lÃ©phone</label>
              <input type="tel" id="contact-phone-fr" name="phone" class={inputBaseClass} placeholder="NumÃ©ro de tÃ©lÃ©phone"/>
            </div>
             <div>
               <label for="contact-country-fr" class="sr-only">SÃ©lectionnez le pays/la rÃ©gion</label>
               <select id="contact-country-fr" name="$country" class={inputBaseClass + " cursor-pointer"}>
                 <option value="" disabled selected>SÃ©lectionnez le pays/la rÃ©gion</option>
                 {countryOptions_fr.map(option => (
                   <option value={option}>{option}</option>
                 ))}
                 <option value="Autre">Autre (Veuillez prÃ©ciser dans les dÃ©tails)</option>
               </select>
             </div>
             <div>
               <label for="contact-product-fr" class="sr-only">SÃ©lectionnez le produit</label>
               <select id="contact-product-fr" name="$product" class={inputBaseClass + " cursor-pointer"}>
                 <option value="" disabled selected>SÃ©lectionnez le produit</option>
                 {productOptions_fr.map(option => (
                   <option value={option}>{option}</option>
                 ))}
               </select>
             </div>
            <div>
              <label for="contact-details-fr" class="sr-only">DÃ©tails</label>
              <textarea id="contact-details-fr" name="message" rows="4" class={inputBaseClass} placeholder="DÃ©tails" required></textarea>
            </div>
            <div class="mt-2">
                <div class="g-recaptcha" data-sitekey={recaptchaSiteKey}></div>
            </div>
          </div>

          <div class="mt-4 grid">
            <AuthBtn title="Envoyer le Message" /> {/* Ã‡evrildi */}
          </div>
          <div class="mt-3 text-center">
            <p class="text-sm text-neutral-600 dark:text-neutral-400">
              {formSubTitle_fr}
            </p>
          </div>
        </form>
      </div>

      {/* SaÄŸ Taraf: Ã–nce Review, Sonra Ä°kon BloklarÄ± */}
      <div class="space-y-8">
        <div class="rounded-xl border border-neutral-200 bg-neutral-100 p-4 shadow-sm dark:border-neutral-700 dark:bg-neutral-800 sm:p-6">
           <ReviewComponent
             avatars={groupAvatarSrcs} {/* Grup avatarlarÄ± aynÄ± */}
             starCount={starCount_fr}
             rating={rating_fr}
             reviews={reviews_fr}
             testimonialText="Kraffe est incroyablement convivial et fournit des rÃ©sultats constants Ã  chaque fois." // Ã–rnek Ã§evrilmiÅŸ yorum
             testimonialAuthor="Amir Montazer" // Bu prop'u ReviewComponent'ten kaldÄ±rmÄ±ÅŸtÄ±k, ama burada tekrar eklenmiÅŸ.
                                             // EÄŸer ReviewComponent prop olarak almÄ±yorsa, bu satÄ±rlarÄ± silebilirsiniz.
                                             // Ya da ReviewComponent'i bu prop'larÄ± alacak ÅŸekilde gÃ¼ncelleyebilirsiniz.
                                             // Åžimdilik, bu prop'u amirAvatarData ile deÄŸiÅŸtirelim.
             testimonialAvatar={amirAvatarData} // Prop'tan gelen veri
             testimonialAvatarAlt="Portrait d'Amir Montazer" // Ã‡evrildi
             testimonialRole="Etude Coffee Co."
           />
        </div>
        <div class="space-y-6 divide-y divide-neutral-200 dark:divide-neutral-700">
          <div class="pt-6 first:pt-0">
             <ContactIconBlock heading={officeHeading_fr} content={officeContent_fr} isAddressVisible={true} addressContent={officeAddress_fr}>
               <Icon name="mapPin" />
             </ContactIconBlock>
          </div>
          <div class="pt-6 first:pt-0">
             <ContactIconBlock heading={emailHeading_fr} content={emailContent_fr} isLinkVisible={true} linkTitle={emailLinkTitle_fr} linkURL={emailLinkURL_fr}>
               <Icon name="envelopeOpen" />
             </ContactIconBlock>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script src="https://www.google.com/recaptcha/api.js" async defer></script>
